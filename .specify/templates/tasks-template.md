---

description: "機能実装のタスク一覧テンプレート"
---

# タスク: [機能名]

**入力**: `/specs/[###-feature-name]/`配下の設計ドキュメント
**前提**: plan.md (必須), spec.md (ユーザーストーリー用に必須), research.md, data-model.md, contracts/

**テストについて**: 以下の例にはテストタスクが含まれているが、機能仕様で明示的に要求された場合のみ実施する。

**構成方針**: タスクはユーザーストーリーごとにグループ化し、各ストーリーを独立して実装・テストできるようにする。

## 記法: `[ID] [P?] [Story] 説明`

- **[P]**: 並列実行可 (別ファイル、依存なし)
- **[Story]**: 所属するユーザーストーリー (例: US1, US2, US3)
- 説明には正確なファイルパスを記載

## パス規約

- **単一プロジェクト**: リポジトリルートに`src/`, `tests/`
- **Webアプリ**: `backend/src/`, `frontend/src/`
- **モバイル**: `api/src/`, `ios/src/`または`android/src/`
- 以下は単一プロジェクトを想定 - plan.mdの構成に合わせて調整する

<!--
  ============================================================================
  重要: 以下は説明用のサンプルタスク

  /speckit.tasksコマンドは、以下を元に実タスクに置き換える:
  - spec.mdのユーザーストーリー (優先度 P1, P2, P3...)
  - plan.mdの機能要件
  - data-model.mdのエンティティ
  - contracts/のエンドポイント

  タスクはユーザーストーリー単位で整理し、各ストーリーが以下を満たすこと:
  - 独立して実装できる
  - 独立してテストできる
  - MVPとして段階的にリリースできる

  生成したtasks.mdにこのサンプルを残さないこと
  ============================================================================
-->

## フェーズ1: セットアップ (共通基盤)

**目的**: プロジェクト初期化と基本構造

- [ ] T001 実装計画に沿ってプロジェクト構成を作成
- [ ] T002 [framework]で[language]プロジェクトを初期化
- [ ] T003 [P] Lintとフォーマッタを設定

---

## フェーズ2: 基盤構築 (すべての前提)

**目的**: どのユーザーストーリーにも必要な基盤を先に構築

**⚠️ 重要**: このフェーズ完了まで、ユーザーストーリーの実装に着手しない

基盤タスクの例 (プロジェクトに応じて調整):

- [ ] T004 DBスキーマとマイグレーション基盤をセットアップ
- [ ] T005 [P] 認証・認可の基盤を実装
- [ ] T006 [P] APIルーティングとミドルウェア構造をセットアップ
- [ ] T007 全ストーリーで使う基本モデル・エンティティを作成
- [ ] T008 エラー処理とロギングの基盤を構成
- [ ] T009 環境設定管理をセットアップ

**チェックポイント**: 基盤完成 - ここからユーザーストーリーを並列着手可能

---

## フェーズ3: ユーザーストーリー1 - [タイトル] (優先度: P1) 🎯 MVP

**目的**: [このストーリーで実現すること]

**独立したテスト**: [単独での動作確認方法]

### ユーザーストーリー1のテスト (任意 - 要求時のみ) ⚠️

> **注: テストを先に書き、実装前に失敗することを確認する**

- [ ] T010 [P] [US1] tests/contract/test_[name].pyに[endpoint]のコントラクトテスト
- [ ] T011 [P] [US1] tests/integration/test_[name].pyに[user journey]の統合テスト

### ユーザーストーリー1の実装

- [ ] T012 [P] [US1] src/models/[entity1].pyに[Entity1]モデルを作成
- [ ] T013 [P] [US1] src/models/[entity2].pyに[Entity2]モデルを作成
- [ ] T014 [US1] src/services/[service].pyに[Service]を実装 (T012, T013に依存)
- [ ] T015 [US1] src/[location]/[file].pyに[endpoint/feature]を実装
- [ ] T016 [US1] バリデーションとエラー処理を追加
- [ ] T017 [US1] ストーリー1の操作ログを追加

**チェックポイント**: ここまででユーザーストーリー1が単独で動作・テスト可能になる

---

## フェーズ4: ユーザーストーリー2 - [タイトル] (優先度: P2)

**目的**: [このストーリーで実現すること]

**独立したテスト**: [単独での動作確認方法]

### ユーザーストーリー2のテスト (任意 - 要求時のみ) ⚠️

- [ ] T018 [P] [US2] tests/contract/test_[name].pyに[endpoint]のコントラクトテスト
- [ ] T019 [P] [US2] tests/integration/test_[name].pyに[user journey]の統合テスト

### ユーザーストーリー2の実装

- [ ] T020 [P] [US2] src/models/[entity].pyに[Entity]モデルを作成
- [ ] T021 [US2] src/services/[service].pyに[Service]を実装
- [ ] T022 [US2] src/[location]/[file].pyに[endpoint/feature]を実装
- [ ] T023 [US2] ストーリー1のコンポーネントと連携 (必要な場合)

**チェックポイント**: ここまででストーリー1と2が両方とも独立動作する

---

## フェーズ5: ユーザーストーリー3 - [タイトル] (優先度: P3)

**目的**: [このストーリーで実現すること]

**独立したテスト**: [単独での動作確認方法]

### ユーザーストーリー3のテスト (任意 - 要求時のみ) ⚠️

- [ ] T024 [P] [US3] tests/contract/test_[name].pyに[endpoint]のコントラクトテスト
- [ ] T025 [P] [US3] tests/integration/test_[name].pyに[user journey]の統合テスト

### ユーザーストーリー3の実装

- [ ] T026 [P] [US3] src/models/[entity].pyに[Entity]モデルを作成
- [ ] T027 [US3] src/services/[service].pyに[Service]を実装
- [ ] T028 [US3] src/[location]/[file].pyに[endpoint/feature]を実装

**チェックポイント**: 全ストーリーが独立動作する

---

[必要に応じてストーリーを追加。同じパターンで記述]

---

## フェーズN: 仕上げと横断的対応

**目的**: 複数ストーリーにまたがる改善

- [ ] TXXX [P] docs/配下のドキュメント更新
- [ ] TXXX コードの整理とリファクタリング
- [ ] TXXX 全ストーリーの性能最適化
- [ ] TXXX [P] ユニットテスト追加 (要求された場合) tests/unit/
- [ ] TXXX セキュリティ強化
- [ ] TXXX quickstart.mdの動作確認

---

## 依存関係と実行順序

### フェーズ間の依存

- **セットアップ (フェーズ1)**: 依存なし - すぐ着手可
- **基盤構築 (フェーズ2)**: セットアップ完了後 - 全ストーリーの前提
- **ユーザーストーリー (フェーズ3以降)**: すべて基盤構築の完了が前提
  - 人員がいれば並列着手可
  - または優先度順に順次 (P1 → P2 → P3)
- **仕上げ (最終フェーズ)**: 必要なストーリー完了後

### ユーザーストーリー間の依存

- **ユーザーストーリー1 (P1)**: 基盤構築後に着手可 - 他ストーリーへの依存なし
- **ユーザーストーリー2 (P2)**: 基盤構築後に着手可 - US1と連携することもあるが独立テスト可能にする
- **ユーザーストーリー3 (P3)**: 基盤構築後に着手可 - US1/US2と連携することもあるが独立テスト可能にする

### 各ストーリー内での順序

- テスト (含める場合)は実装前に書き、失敗することを確認
- モデルを先に、サービスは後
- サービスを先に、エンドポイントは後
- コア実装を先に、連携は後
- ストーリー完成後に次の優先度へ

### 並列実行の機会

- [P]マークのセットアップタスクは並列実行可
- [P]マークの基盤タスクは並列実行可 (フェーズ2内で)
- 基盤フェーズ完了後、全ストーリーを並列着手可 (人員がいれば)
- [P]マークのテストは並列実行可
- [P]マークのモデルは並列実行可
- 異なるストーリーは別メンバーで並列作業可

---

## 並列実行の例: ユーザーストーリー1

```bash
# ストーリー1のテストを同時起動 (テスト実施時):
Task: "tests/contract/test_[name].pyに[endpoint]のコントラクトテスト"
Task: "tests/integration/test_[name].pyに[user journey]の統合テスト"

# ストーリー1のモデルを同時起動:
Task: "src/models/[entity1].pyに[Entity1]モデルを作成"
Task: "src/models/[entity2].pyに[Entity2]モデルを作成"
```

---

## 実装の進め方

### MVPファースト (ストーリー1のみ)

1. フェーズ1: セットアップを完了
2. フェーズ2: 基盤構築を完了 (重要 - 全ストーリーの前提)
3. フェーズ3: ユーザーストーリー1を完了
4. **停止して検証**: ストーリー1を単独テスト
5. 準備できたらデプロイ・デモ

### 段階的リリース

1. セットアップ + 基盤構築 → 基盤完成
2. ストーリー1追加 → 単独テスト → デプロイ・デモ (MVP!)
3. ストーリー2追加 → 単独テスト → デプロイ・デモ
4. ストーリー3追加 → 単独テスト → デプロイ・デモ
5. 各ストーリーが既存を壊さず価値を追加

### チーム並列開発

複数の開発者がいる場合:

1. チームでセットアップ + 基盤構築を完了
2. 基盤完了後:
   - 開発者A: ストーリー1
   - 開発者B: ストーリー2
   - 開発者C: ストーリー3
3. 各ストーリーを独立完成・統合

---

## 補足

- [P]タスク = 別ファイル、依存なし
- [Story]ラベルでタスクとストーリーを紐付け、トレーサビリティ確保
- 各ストーリーは独立完成・テスト可能にする
- テストは実装前に失敗確認
- 各タスクまたは論理グループごとにコミット
- 各チェックポイントで停止し、ストーリーを単独検証可能
- 避けるべきこと: 曖昧なタスク、同一ファイルの競合、ストーリー間の強依存
